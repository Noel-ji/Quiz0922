<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지 - Memory Treasures</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body class="bg-light">
    <!-- 네비게이션 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
        <div class="container">
            <a class="navbar-brand" th:href="@{/}">🏪 Memory Treasures</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" th:href="@{/}">홈</a>
                <a class="nav-link" th:href="@{/products}">상품</a>
                <a class="nav-link" th:href="@{/cart}">장바구니</a>
             
				<button id="logout-btn" class="btn btn-outline-light btn-sm">로그아웃</button>
            </div>
        </div>
    </nav>

	<script type="module">
		// import { TokenManager } from './js/token.js'; // ❌ 제거
		// import { tokenApi } from './js/tokenApi.js'; // ❌ 제거
		
		// ❌ loadUserProfile 함수 및 window.addEventListener("load", loadUserProfile); 모두 제거
		// ...

	    // ✅ 로그아웃은 토큰만 삭제하면 되므로, 이 로직은 유지하거나, 서버 로그아웃으로 전환
		document.getElementById("logout-btn").addEventListener("click", function() {
	        // HttpOnly 쿠키를 사용하면 JS에서 토큰을 직접 삭제할 수 없으므로, 
	        // 로그아웃 시 서버에 쿠키 삭제 요청(POST /logout)을 보내야 합니다.
	        // 또는 쿠키 만료 시간을 0으로 설정하는 JS 코드를 사용할 수도 있지만, 서버가 권장됨.
	        
	        // **임시 방편:** 토큰 삭제 없이 로그인 페이지로 이동
	        window.location.href = "/login?logout=true"; 
		});
	</script>
		
		
	</script>
</body>
</html>
